# リリースチェックリスト

「おやすみ前の1分」App Store リリースに向けたチェックリストです。

---

## 1. 技術チェック

### ビルド・動作確認

- [ ] `npm install` がフロントエンド・バックエンドともにエラーなく完了する
- [ ] `eas build --platform ios` でiOSビルドが成功する
- [ ] 実機（iPhone）でアプリが起動し、クラッシュしない
- [ ] デモモード（DEMO_MODE=true）で全画面が正常に動作する
- [ ] 本番モード（実APIキー）で全画面が正常に動作する

### コア機能

- [ ] マイクボタン押下で録音が開始される
- [ ] 録音した音声がWhisper APIで正しくテキスト変換される
- [ ] AIが共感的な返答を返す（Claude API連携）
- [ ] 「話し終えた」ボタンで感情分析が実行される
- [ ] 感情カード（ラベル・色・一言まとめ）が正しく表示される
- [ ] ホーム画面で「今日はもう話したね」が正しく表示される
- [ ] 週間振り返り画面で7日分の感情データが表示される

### ネットワーク・エラー処理

- [ ] オフライン時に適切なエラーメッセージが表示される
- [ ] API応答がタイムアウトした場合のハンドリングが正常
- [ ] バックエンドがダウンしている場合のエラー表示

### パフォーマンス・品質

- [ ] アプリ起動時間が3秒以内
- [ ] 録音開始・停止にラグがない
- [ ] メモリリークがない（長時間使用テスト）
- [ ] AsyncStorageへの保存・読み出しが正常

### セキュリティ

- [ ] APIキーがフロントエンドのコードに含まれていない
- [ ] バックエンドのAPIキーが環境変数で管理されている
- [ ] .env ファイルが .gitignore に含まれている
- [ ] HTTPS通信が強制されている（本番環境）

---

## 2. インフラ・デプロイ

- [ ] バックエンドがRailway（またはクラウド）にデプロイ済み
- [ ] デプロイされたバックエンドのURLでAPIが正常応答する
- [ ] フロントエンドのBASE_URLが本番バックエンドURLに設定されている
- [ ] 環境変数（ANTHROPIC_API_KEY, OPENAI_API_KEY）が本番環境に設定済み
- [ ] DEMO_MODEが本番環境で無効になっている

---

## 3. Apple Developer / App Store Connect

### アカウント・証明書

- [ ] Apple Developer Program に登録済み（年間$99支払い済み）
- [ ] App ID が作成済み
- [ ] Provisioning Profile が有効
- [ ] EAS で Apple アカウントが連携済み

### App Store Connect 設定

- [ ] アプリが App Store Connect に登録済み
- [ ] アプリ名「おやすみ前の1分」が登録済み
- [ ] バンドルIDが正しく設定されている
- [ ] 第1カテゴリ：ヘルスケア／フィットネス
- [ ] 第2カテゴリ：ライフスタイル
- [ ] 年齢レーティング：4+

### 申請素材

- [ ] アプリ説明文（日本語）が入力済み
- [ ] サブタイトルが入力済み（30文字以内）
- [ ] キーワードが入力済み（100文字以内）
- [ ] スクリーンショットがアップロード済み（6.7インチ / 6.1インチ）
  - [ ] ホーム画面
  - [ ] 録音・会話画面
  - [ ] 感情カード画面
  - [ ] 週間振り返り画面
- [ ] アプリアイコン（1024x1024px）がアップロード済み
- [ ] プライバシーポリシーURLが設定済み
- [ ] サポートURLが設定済み
- [ ] App Store プライバシー情報が入力済み

### 審査対応

- [ ] 審査メモに非医療目的であることを記載
- [ ] APIキーの利用方法について審査メモに記載（必要な場合）
- [ ] マイクの使用目的（NSMicrophoneUsageDescription）が適切に設定

---

## 4. TestFlight ベータテスト

- [ ] TestFlight ビルドがアップロード済み
- [ ] 内部テスター（自分）でインストール・動作確認済み
- [ ] 外部テスター招待・フィードバック収集済み
- [ ] 致命的なバグがゼロであることを確認
- [ ] ベータテスト計画書の合格基準を満たしている

---

## 5. リリース後の初動確認

### リリース直後（24時間以内）

- [ ] App Store でアプリが検索・表示される
- [ ] ダウンロード・インストールが正常にできる
- [ ] 初回起動時のマイク権限リクエストが表示される
- [ ] 一連のフロー（録音 → AI返答 → 感情カード → ホーム戻り）が正常動作
- [ ] クラッシュレポートの確認（App Store Connect → Analytics）

### リリース後1週間

- [ ] ダウンロード数の推移を確認
- [ ] ユーザーレビュー・評価の確認
- [ ] クラッシュ率が1%未満であることを確認
- [ ] バックエンドのAPIエラー率の確認
- [ ] Railway のリソース使用量が無料枠内か確認

### リリース後1ヶ月

- [ ] 継続利用率（DAU/WAU）の確認
- [ ] APIコスト（Claude + Whisper）の実績確認
- [ ] ユーザーフィードバックの集約・優先度付け
- [ ] 次バージョンの改善計画策定
