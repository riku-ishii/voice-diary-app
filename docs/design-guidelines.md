# デザインガイドライン - おやすみ前の1分

## 概要

「おやすみ前の1分」のデザインシステムドキュメントです。
既存のコードベースから抽出したカラー、タイポグラフィ、スペーシング、コンポーネントのルールを定義します。

---

## 1. カラーシステム

### 背景色

| トークン | カラー | 用途 |
|----------|--------|------|
| `bg-primary` | `#0F172A` | メイン背景（Recording、Weekly） |
| `bg-gradient-start` | `#0F172A` | グラデーション背景の開始色（Home、Summary） |
| `bg-gradient-end` | `#1E293B` | グラデーション背景の終了色 |
| `bg-surface` | `rgba(255,255,255,0.08)` | カード・バブル等のサーフェス |
| `bg-surface-light` | `rgba(255,255,255,0.1)` | AI吹き出し背景 |
| `bg-surface-muted` | `rgba(255,255,255,0.06)` | ボーダー、セパレーター |

### テキスト色

| トークン | カラー | 用途 |
|----------|--------|------|
| `text-primary` | `#F1F5F9` | メインテキスト（タイトル、ボタン、本文） |
| `text-secondary` | `#94A3B8` | サブテキスト（サブタイトル、日付、スコアラベル） |
| `text-tertiary` | `#CBD5E0` | 補助テキスト（感情ラベル小） |
| `text-dark` | `#0F172A` | 反転テキスト（感情バッジ上） |
| `text-inactive` | `#475569` | タブバー非アクティブ |

### アクセントカラー

| トークン | カラー | 用途 |
|----------|--------|------|
| `accent-primary` | `#7B68EE` | メインアクセント（ボタン、吹き出し、波形バー、タブアクティブ） |
| `accent-primary-muted` | `rgba(123,104,238,0.3)` | アクセントの淡い版（ボーダー、完了ボタン背景） |
| `accent-primary-subtle` | `rgba(123,104,238,0.15)` | アクセントの最も薄い版（終了ボタン背景） |

### 感情カラー

| 感情 | カラー | 用途 |
|------|--------|------|
| 喜び | `#FFD700` | ゴールド |
| 充実 | `#FF8C42` | オレンジ |
| 平和 | `#87CEEB` | スカイブルー |
| 疲れ | `#7B68EE` | ラベンダー（アクセントと同色） |
| 不安 | `#9B8EA8` | モーブ |
| 悲しみ | `#4A5568` | ダークグレー |
| 怒り | `#C53030` | レッド |
| 空虚 | `#CBD5E0` | ライトグレー |
| デフォルト | `#CBD5E0` | 該当なしの場合 |

### ステータスカラー

| トークン | カラー | 用途 |
|----------|--------|------|
| `error-bg` | `rgba(239,68,68,0.15)` | エラーバナー背景 |
| `error-border` | `rgba(239,68,68,0.3)` | エラーバナーボーダー |
| `error-text` | `#FCA5A5` | エラーテキスト |
| `error-toast-bg` | `rgba(239,68,68,0.9)` | トースト背景 |
| `recording-bg` | `rgba(220,50,50,0.25)` | 録音中パルス背景 |
| `recording-button` | `#DC2626` | 録音中ボタン色 |

---

## 2. タイポグラフィ

### フォント
システムフォント（San Francisco）を使用。カスタムフォントは未導入。

### テキストスタイル

| スタイル | fontSize | fontWeight | 用途 |
|----------|----------|------------|------|
| **Display** | 56 | - | 絵文字表示（ホーム画面） |
| **Heading 1** | 28 | bold | メインタイトル（「おやすみ前の1分」） |
| **Heading 2** | 24 | bold | セクションタイトル（「今週のきもち」） |
| **Heading 3** | 22 | bold | サブセクションタイトル（「今日のきもち」） |
| **Emotion Label** | 28 | bold | 感情カードのラベル |
| **Button Large** | 18 | 600 | メインCTAボタン |
| **Body** | 16 | normal | 本文テキスト（サマリー、サブタイトル） |
| **Button Medium** | 16 | 600 | セカンダリボタン |
| **Conversation** | 15 | normal | 会話吹き出し内テキスト（lineHeight: 22） |
| **Navigation** | 15 | normal | 戻るボタン等 |
| **Button Small** | 14 | 600 | 小ボタン（「話し終えた」） |
| **Caption** | 13 | normal | スコアラベル、補助テキスト |
| **Date** | 11 | normal | 週間チャートの日付 |
| **Label Small** | 10 | normal | 週間チャートの感情ラベル |

---

## 3. スペーシング

### 基本単位
4px を基本単位として、4の倍数で統一。

| トークン | 値 | 用途 |
|----------|-----|------|
| `space-xs` | 4px | 最小gap（会話バブル間、チャート要素間） |
| `space-sm` | 8px | 小gap（ボタン間、絵文字のマージン） |
| `space-md` | 16px | 中gap（コンテンツgap、パディング） |
| `space-lg` | 24px | 大gap（セクション間、コンテンツパディング） |
| `space-xl` | 32px | 特大（ホームのサブタイトル下マージン、ホームのパディング） |

### 画面パディング
| 画面 | paddingHorizontal | paddingTop |
|------|-------------------|------------|
| Home | 32px | - (center) |
| Recording | 16px (messages) | 60px |
| Summary | 24px | - (center) |
| Weekly | 16px | 60px |

---

## 4. ボーダーラジウス

| トークン | 値 | 用途 |
|----------|-----|------|
| `radius-sm` | 3px | 波形バー、スコアバー |
| `radius-md` | 12px | 会話バブル、エラーバナー、トースト |
| `radius-lg` | 14px | サマリーボタン |
| `radius-xl` | 16px | メインCTAボタン（ホーム）、サークル |
| `radius-xxl` | 20px | EmotionCard、終了ボタン |
| `radius-pill` | 24px | 感情バッジ |
| `radius-circle` | 32px / 40px | マイクボタン（半径に応じた完全円） |

---

## 5. コンポーネント仕様

### 5.1 MicButton（マイクボタン）

- **サイズ**: 外円 80x80px、内円 64x64px
- **通常状態**: 内円 `#F1F5F9`、外円 `rgba(255,255,255,0.15)`
- **録音中**: 内円 `#DC2626`、外円 `rgba(220,50,50,0.25)` + パルスアニメーション（scale 1.0 → 1.25、600ms）
- **アイコン**: 通常 🎤 / 録音中 ⏹ (fontSize: 28)

### 5.2 ConversationBubble（会話吹き出し）

- **ユーザー**: 右寄せ、背景 `#7B68EE`
- **AI**: 左寄せ、背景 `rgba(255,255,255,0.1)`
- **最大幅**: 80%
- **パディング**: 12px
- **角丸**: 12px
- **テキスト**: 15px / lineHeight 22 / `#F1F5F9`

### 5.3 EmotionCard（感情カード）

- **背景**: `rgba(255,255,255,0.08)`
- **ボーダー**: 1.5px、感情カラーに連動
- **角丸**: 20px
- **パディング**: 24px
- **構成**: 感情バッジ（pill shape, 感情カラー背景） → サマリーテキスト → スコアバー
- **スコアバー**: トラック高さ 6px、`rgba(255,255,255,0.1)` 上に感情カラーで充填

### 5.4 WaveVisualizer（波形ビジュアライザー）

- **バー数**: 5本
- **バーサイズ**: 幅 6px、高さ 8〜40px
- **バー色**: `#7B68EE`
- **角丸**: 3px
- **gap**: 6px
- **アニメーション**: 各バーが時差（80ms間隔）で上下にアニメーション

### 5.5 WeeklyChart（週間チャート）

- **日数**: 7日分を横スクロール表示
- **列幅**: 52px、gap 12px
- **構成（上から）**: バー → 感情ドット → 日付 → 感情ラベル
- **ドット**: 32x32px 円形、感情カラー、opacity はvalenceに連動
- **バー**: 幅 8px、高さ 6〜48px（score依存）、角丸 4px
- **データなし**: 色 `#334155`、opacity 0.2〜0.4

### 5.6 ボタン

#### メインCTA（ホーム画面）
- 背景: `#7B68EE`
- 角丸: 16px
- パディング: 16px / 40px
- テキスト: 18px / 600 / `#F1F5F9`
- 押下時: opacity 0.8
- 完了状態: 背景 `rgba(123,104,238,0.3)`、opacity 0.6

#### セカンダリ（サマリー画面）
- 背景: `#7B68EE`
- 角丸: 14px
- パディング: 14px / 36px
- テキスト: 16px / 600 / `#F1F5F9`

#### テキストボタン（「話し終えた」）
- 背景: `rgba(123,104,238,0.15)`
- ボーダー: 1px `rgba(123,104,238,0.3)`
- 角丸: 20px
- パディング: 10px / 24px
- テキスト: 14px / 600 / `#7B68EE`

---

## 6. タブバー

- **背景**: `#0F172A`
- **ボーダー上部**: `rgba(255,255,255,0.08)`
- **アクティブ色**: `#7B68EE`（opacity 1.0）
- **非アクティブ色**: `#475569`（opacity 0.5）
- **アイコン**: 絵文字（ホーム 🏠 / 今週 📅）、fontSize 20
- **タブ**: ホーム / 今週

---

## 7. アニメーション

| 対象 | タイプ | 値 |
|------|--------|-----|
| マイクボタンパルス | scale | 1.0 → 1.25 → 1.0、600ms loop |
| 波形バー | height | 8px → 40px → 8px、300〜600ms、80ms時差 |
| ボタン押下 | opacity | 1.0 → 0.8 |
| 会話スクロール | scrollToEnd | animated: true |

---

## 8. 画面構成一覧

| 画面 | パス | 背景 | 主要コンポーネント |
|------|------|------|-------------------|
| ホーム | `/(tabs)/index` | LinearGradient | 月絵文字、タイトル、CTAボタン |
| 週間 | `/(tabs)/weekly` | Solid `#0F172A` | WeeklyChart |
| 録音 | `/recording` | Solid `#0F172A` | ConversationBubble, MicButton, WaveVisualizer |
| サマリー | `/summary` | LinearGradient | EmotionCard |

---

## 9. デザイン原則

1. **ダークファースト** -- 夜間使用を前提に、全画面ダークテーマで統一
2. **最小限のテキスト** -- 疲れた状態でも直感的に操作できるよう、文字量を最小限に
3. **ラベンダーの一貫性** -- `#7B68EE` をアクセントとして一貫使用し、ブランドカラーとして確立
4. **やさしい半透明** -- サーフェスは半透明白 (`rgba(255,255,255,0.08〜0.15)`) で奥行きを表現
5. **感情を色で表現** -- 8種類の感情カラーマッピングにより、読まなくても気持ちが伝わるUI
